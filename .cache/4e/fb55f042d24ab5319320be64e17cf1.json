{"id":"n97e","dependencies":[{"name":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\package.json","includedInParent":true,"mtime":1607332937128},{"name":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\gun\\package.json","includedInParent":true,"mtime":1603020308472},{"name":"../gun","loc":{"line":2,"column":65},"parent":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\gun\\lib\\webrtc.js","resolved":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\gun\\gun.js"}],"generated":{"js":"var global = arguments[3];\nvar e=arguments[3];!function(){var n=\"undefined\"!=typeof window?window.Gun:require(\"../gun\");n.on(\"opt\",function(t){this.to.next(t);var i=t.opt;if(!t.once&&n.Mesh&&!1!==i.RTCPeerConnection){var o;\"undefined\"!=typeof window&&(o=window),void 0!==e&&(o=e),o=o||{};var c=i.RTCPeerConnection||o.RTCPeerConnection||o.webkitRTCPeerConnection||o.mozRTCPeerConnection,r=i.RTCSessionDescription||o.RTCSessionDescription||o.webkitRTCSessionDescription||o.mozRTCSessionDescription,d=i.RTCIceCandidate||o.RTCIceCandidate||o.webkitRTCIceCandidate||o.mozRTCIceCandidate;if(c&&r&&d){i.RTCPeerConnection=c,i.RTCSessionDescription=r,i.RTCIceCandidate=d,i.rtc=i.rtc||{iceServers:[{urls:\"stun:stun.l.google.com:19302\"},{urls:\"stun:stun.sipgate.net:3478\"}]},i.rtc.dataChannel=i.rtc.dataChannel||{ordered:!1,maxRetransmits:2},i.rtc.sdp=i.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},i.announce=function(e){t.on(\"out\",{rtc:{id:i.pid,to:e}})};var a=i.mesh=i.mesh||n.Mesh(t);t.on(\"create\",function(e){this.to.next(e),setTimeout(i.announce,1)}),t.on(\"in\",function(e){e.rtc&&s(e),this.to.next(e)})}}function s(e){var n,o,c=e.rtc;if(c&&c.id){if(delete i.announce[c.id],o=c.answer){if(!(n=i.peers[c.id]||s[c.id])||n.remoteSet)return;return n.setRemoteDescription(n.remoteSet=new i.RTCSessionDescription(o))}if(o=c.candidate)return(n=i.peers[c.id]||s[c.id]||s({rtc:{id:c.id}})).addIceCandidate(new i.RTCIceCandidate(o));if(!s[c.id]){(n=new i.RTCPeerConnection(i.rtc)).id=c.id;var r=n.wire=n.createDataChannel(\"dc\",i.rtc.dataChannel);return s[c.id]=n,r.onclose=function(){delete s[c.id],a.bye(n)},r.onerror=function(e){},r.onopen=function(e){a.hi(n)},r.onmessage=function(e){e&&a.hear(e.data||e,n)},n.onicecandidate=function(n){n.candidate&&t.on(\"out\",{\"@\":e[\"#\"],rtc:{candidate:n.candidate,id:i.pid}})},n.ondatachannel=function(e){var n=e.channel;n.onmessage=r.onmessage,n.onopen=r.onopen,n.onclose=r.onclose},(o=c.offer)?(n.setRemoteDescription(new i.RTCSessionDescription(o)),void n.createAnswer(function(o){n.setLocalDescription(o),t.on(\"out\",{\"@\":e[\"#\"],rtc:{answer:o,id:i.pid}})},function(){},i.rtc.sdp)):(n.createOffer(function(o){n.setLocalDescription(o),t.on(\"out\",{\"@\":e[\"#\"],rtc:{offer:o,id:i.pid}})},function(){},i.rtc.sdp),n)}}}})}();"},"sourceMaps":null,"error":null,"hash":"07c127492279f43891a37305e116a966","cacheData":{"env":{}}}