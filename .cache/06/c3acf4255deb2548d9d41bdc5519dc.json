{"id":"ERQT","dependencies":[{"name":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\graphql-anywhere\\lib\\src\\directives.js.map","includedInParent":true,"mtime":1603029498220},{"name":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\graphql-anywhere\\src\\directives.ts","includedInParent":true,"mtime":1603029498220},{"name":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\package.json","includedInParent":true,"mtime":1607330371811},{"name":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\graphql-anywhere\\package.json","includedInParent":true,"mtime":1603029498220},{"name":"./storeUtils","loc":{"line":3,"column":27},"parent":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\graphql-anywhere\\lib\\src\\directives.js","resolved":"C:\\Users\\shadow\\projects\\open-source\\gun-cli\\node_modules\\graphql-anywhere\\lib\\src\\storeUtils.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"./storeUtils\");function r(r,i){if(r.directives&&r.directives.length){var n={};return r.directives.forEach(function(r){n[r.name.value]=e.argumentsObjectFromField(r,i)}),n}return null}function i(e,r){if(void 0===r&&(r={}),!e.directives)return!0;var i=!0;return e.directives.some(function(e){if(\"skip\"===e.name.value||\"include\"===e.name.value){var n=e.arguments,t=e.name.value;if(1!==n.length)throw new Error(\"Incorrect number of arguments for the @\"+t+\" directive.\");var a=e.arguments[0];if(!a.name||\"if\"!==a.name.value)throw new Error(\"Invalid argument for the @\"+t+\" directive.\");var o=e.arguments[0].value,u=!1;if(o&&\"BooleanValue\"===o.kind)u=o.value;else{if(\"Variable\"!==o.kind)throw new Error(\"Argument for the @\"+t+\" directive must be a variable or a bool ean value.\");if(void 0===(u=r[o.name.value]))throw new Error(\"Invalid variable referenced in @\"+t+\" directive.\")}return\"skip\"===t&&(u=!u),!u&&(i=!1,!0)}}),i}exports.getDirectiveInfoFromField=r,exports.shouldInclude=i;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/directives.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/directives.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":72}},{"source":"../../src/directives.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":74}},{"source":"../../src/directives.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":82}},{"source":"../../src/directives.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":98}},{"source":"../../src/directives.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":107}},{"source":"../../src/directives.ts","name":null,"original":{"line":19,"column":42},"generated":{"line":1,"column":109}},{"source":"../../src/directives.ts","name":null,"original":{"line":19,"column":60},"generated":{"line":1,"column":111}},{"source":"../../src/directives.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":114}},{"source":"../../src/directives.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":117}},{"source":"../../src/directives.ts","name":null,"original":{"line":20,"column":12},"generated":{"line":1,"column":119}},{"source":"../../src/directives.ts","name":null,"original":{"line":20,"column":26},"generated":{"line":1,"column":131}},{"source":"../../src/directives.ts","name":null,"original":{"line":20,"column":32},"generated":{"line":1,"column":133}},{"source":"../../src/directives.ts","name":null,"original":{"line":20,"column":43},"generated":{"line":1,"column":144}},{"source":"../../src/directives.ts","name":null,"original":{"line":20,"column":51},"generated":{"line":1,"column":151}},{"source":"../../src/directives.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":152}},{"source":"../../src/directives.ts","name":null,"original":{"line":21,"column":10},"generated":{"line":1,"column":156}},{"source":"../../src/directives.ts","name":null,"original":{"line":21,"column":40},"generated":{"line":1,"column":158}},{"source":"../../src/directives.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":161}},{"source":"../../src/directives.ts","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":168}},{"source":"../../src/directives.ts","name":null,"original":{"line":22,"column":10},"generated":{"line":1,"column":170}},{"source":"../../src/directives.ts","name":null,"original":{"line":22,"column":21},"generated":{"line":1,"column":181}},{"source":"../../src/directives.ts","name":null,"original":{"line":22,"column":29},"generated":{"line":1,"column":189}},{"source":"../../src/directives.ts","name":null,"original":{"line":22,"column":30},"generated":{"line":1,"column":198}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":6},"generated":{"line":1,"column":201}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":19},"generated":{"line":1,"column":203}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":29},"generated":{"line":1,"column":205}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":34},"generated":{"line":1,"column":210}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":43},"generated":{"line":1,"column":217}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":43},"generated":{"line":1,"column":219}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":68},"generated":{"line":1,"column":244}},{"source":"../../src/directives.ts","name":null,"original":{"line":23,"column":79},"generated":{"line":1,"column":246}},{"source":"../../src/directives.ts","name":null,"original":{"line":25,"column":11},"generated":{"line":1,"column":251}},{"source":"../../src/directives.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":1,"column":253}},{"source":"../../src/directives.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":1,"column":260}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":265}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":274}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":1,"column":276}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":56},"generated":{"line":1,"column":278}},{"source":"../../src/directives.ts","name":null,"original":{"line":31,"column":2},"generated":{"line":1,"column":281}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":56},"generated":{"line":1,"column":289}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":56},"generated":{"line":1,"column":293}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":56},"generated":{"line":1,"column":297}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":56},"generated":{"line":1,"column":299}},{"source":"../../src/directives.ts","name":null,"original":{"line":31,"column":7},"generated":{"line":1,"column":304}},{"source":"../../src/directives.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":1,"column":306}},{"source":"../../src/directives.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":1,"column":317}},{"source":"../../src/directives.ts","name":null,"original":{"line":32,"column":11},"generated":{"line":1,"column":324}},{"source":"../../src/directives.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":1,"column":326}},{"source":"../../src/directives.ts","name":null,"original":{"line":35,"column":6},"generated":{"line":1,"column":330}},{"source":"../../src/directives.ts","name":null,"original":{"line":35,"column":21},"generated":{"line":1,"column":333}},{"source":"../../src/directives.ts","name":null,"original":{"line":85,"column":2},"generated":{"line":1,"column":335}},{"source":"../../src/directives.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":342}},{"source":"../../src/directives.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":1,"column":344}},{"source":"../../src/directives.ts","name":null,"original":{"line":36,"column":23},"generated":{"line":1,"column":355}},{"source":"../../src/directives.ts","name":null,"original":{"line":36,"column":28},"generated":{"line":1,"column":360}},{"source":"../../src/directives.ts","name":null,"original":{"line":36,"column":29},"generated":{"line":1,"column":369}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":372}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":33},"generated":{"line":1,"column":375}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":384}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":18},"generated":{"line":1,"column":386}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":23},"generated":{"line":1,"column":391}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":68},"generated":{"line":1,"column":398}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":43},"generated":{"line":1,"column":410}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":53},"generated":{"line":1,"column":412}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":58},"generated":{"line":1,"column":417}},{"source":"../../src/directives.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":423}},{"source":"../../src/directives.ts","name":null,"original":{"line":44,"column":4},"generated":{"line":1,"column":424}},{"source":"../../src/directives.ts","name":null,"original":{"line":44,"column":10},"generated":{"line":1,"column":428}},{"source":"../../src/directives.ts","name":null,"original":{"line":44,"column":31},"generated":{"line":1,"column":430}},{"source":"../../src/directives.ts","name":null,"original":{"line":44,"column":41},"generated":{"line":1,"column":432}},{"source":"../../src/directives.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":1,"column":442}},{"source":"../../src/directives.ts","name":null,"original":{"line":45,"column":26},"generated":{"line":1,"column":444}},{"source":"../../src/directives.ts","name":null,"original":{"line":45,"column":36},"generated":{"line":1,"column":446}},{"source":"../../src/directives.ts","name":null,"original":{"line":45,"column":41},"generated":{"line":1,"column":451}},{"source":"../../src/directives.ts","name":null,"original":{"line":46,"column":4},"generated":{"line":1,"column":457}},{"source":"../../src/directives.ts","name":null,"original":{"line":46,"column":38},"generated":{"line":1,"column":460}},{"source":"../../src/directives.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":464}},{"source":"../../src/directives.ts","name":null,"original":{"line":46,"column":27},"generated":{"line":1,"column":466}},{"source":"../../src/directives.ts","name":null,"original":{"line":47,"column":6},"generated":{"line":1,"column":473}},{"source":"../../src/directives.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":479}},{"source":"../../src/directives.ts","name":null,"original":{"line":47,"column":16},"generated":{"line":1,"column":483}},{"source":"../../src/directives.ts","name":null,"original":{"line":47,"column":22},"generated":{"line":1,"column":489}},{"source":"../../src/directives.ts","name":null,"original":{"line":47,"column":64},"generated":{"line":1,"column":531}},{"source":"../../src/directives.ts","name":null,"original":{"line":47,"column":77},"generated":{"line":1,"column":533}},{"source":"../../src/directives.ts","name":null,"original":{"line":51,"column":4},"generated":{"line":1,"column":548}},{"source":"../../src/directives.ts","name":null,"original":{"line":51,"column":10},"generated":{"line":1,"column":552}},{"source":"../../src/directives.ts","name":null,"original":{"line":51,"column":23},"generated":{"line":1,"column":554}},{"source":"../../src/directives.ts","name":null,"original":{"line":51,"column":33},"generated":{"line":1,"column":556}},{"source":"../../src/directives.ts","name":null,"original":{"line":51,"column":43},"generated":{"line":1,"column":566}},{"source":"../../src/directives.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":1,"column":569}},{"source":"../../src/directives.ts","name":null,"original":{"line":52,"column":9},"generated":{"line":1,"column":573}},{"source":"../../src/directives.ts","name":null,"original":{"line":52,"column":20},"generated":{"line":1,"column":575}},{"source":"../../src/directives.ts","name":null,"original":{"line":52,"column":54},"generated":{"line":1,"column":581}},{"source":"../../src/directives.ts","name":null,"original":{"line":52,"column":28},"generated":{"line":1,"column":588}},{"source":"../../src/directives.ts","name":null,"original":{"line":52,"column":39},"generated":{"line":1,"column":590}},{"source":"../../src/directives.ts","name":null,"original":{"line":52,"column":44},"generated":{"line":1,"column":595}},{"source":"../../src/directives.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":1,"column":601}},{"source":"../../src/directives.ts","name":null,"original":{"line":53,"column":12},"generated":{"line":1,"column":607}},{"source":"../../src/directives.ts","name":null,"original":{"line":53,"column":16},"generated":{"line":1,"column":611}},{"source":"../../src/directives.ts","name":null,"original":{"line":53,"column":22},"generated":{"line":1,"column":617}},{"source":"../../src/directives.ts","name":null,"original":{"line":53,"column":51},"generated":{"line":1,"column":646}},{"source":"../../src/directives.ts","name":null,"original":{"line":53,"column":64},"generated":{"line":1,"column":648}},{"source":"../../src/directives.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":1,"column":663}},{"source":"../../src/directives.ts","name":null,"original":{"line":56,"column":10},"generated":{"line":1,"column":667}},{"source":"../../src/directives.ts","name":null,"original":{"line":56,"column":20},"generated":{"line":1,"column":669}},{"source":"../../src/directives.ts","name":null,"original":{"line":56,"column":30},"generated":{"line":1,"column":671}},{"source":"../../src/directives.ts","name":null,"original":{"line":56,"column":40},"generated":{"line":1,"column":681}},{"source":"../../src/directives.ts","name":null,"original":{"line":56,"column":43},"generated":{"line":1,"column":684}},{"source":"../../src/directives.ts","name":null,"original":{"line":57,"column":8},"generated":{"line":1,"column":690}},{"source":"../../src/directives.ts","name":null,"original":{"line":57,"column":31},"generated":{"line":1,"column":693}},{"source":"../../src/directives.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":1,"column":695}},{"source":"../../src/directives.ts","name":null,"original":{"line":58,"column":9},"generated":{"line":1,"column":698}},{"source":"../../src/directives.ts","name":null,"original":{"line":58,"column":37},"generated":{"line":1,"column":701}},{"source":"../../src/directives.ts","name":null,"original":{"line":58,"column":20},"generated":{"line":1,"column":718}},{"source":"../../src/directives.ts","name":null,"original":{"line":58,"column":28},"generated":{"line":1,"column":720}},{"source":"../../src/directives.ts","name":null,"original":{"line":69,"column":6},"generated":{"line":1,"column":725}},{"source":"../../src/directives.ts","name":null,"original":{"line":69,"column":21},"generated":{"line":1,"column":727}},{"source":"../../src/directives.ts","name":null,"original":{"line":69,"column":50},"generated":{"line":1,"column":729}},{"source":"../../src/directives.ts","name":null,"original":{"line":58,"column":53},"generated":{"line":1,"column":739}},{"source":"../../src/directives.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":1,"column":740}},{"source":"../../src/directives.ts","name":null,"original":{"line":60,"column":27},"generated":{"line":1,"column":743}},{"source":"../../src/directives.ts","name":null,"original":{"line":60,"column":10},"generated":{"line":1,"column":756}},{"source":"../../src/directives.ts","name":null,"original":{"line":60,"column":18},"generated":{"line":1,"column":758}},{"source":"../../src/directives.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":763}},{"source":"../../src/directives.ts","name":null,"original":{"line":61,"column":14},"generated":{"line":1,"column":769}},{"source":"../../src/directives.ts","name":null,"original":{"line":61,"column":18},"generated":{"line":1,"column":773}},{"source":"../../src/directives.ts","name":null,"original":{"line":61,"column":24},"generated":{"line":1,"column":779}},{"source":"../../src/directives.ts","name":null,"original":{"line":61,"column":45},"generated":{"line":1,"column":800}},{"source":"../../src/directives.ts","name":null,"original":{"line":61,"column":58},"generated":{"line":1,"column":802}},{"source":"../../src/directives.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":856}},{"source":"../../src/directives.ts","name":null,"original":{"line":64,"column":28},"generated":{"line":1,"column":864}},{"source":"../../src/directives.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":869}},{"source":"../../src/directives.ts","name":null,"original":{"line":63,"column":22},"generated":{"line":1,"column":871}},{"source":"../../src/directives.ts","name":null,"original":{"line":63,"column":33},"generated":{"line":1,"column":873}},{"source":"../../src/directives.ts","name":null,"original":{"line":63,"column":58},"generated":{"line":1,"column":875}},{"source":"../../src/directives.ts","name":null,"original":{"line":63,"column":63},"generated":{"line":1,"column":880}},{"source":"../../src/directives.ts","name":null,"original":{"line":65,"column":10},"generated":{"line":1,"column":888}},{"source":"../../src/directives.ts","name":null,"original":{"line":65,"column":16},"generated":{"line":1,"column":894}},{"source":"../../src/directives.ts","name":null,"original":{"line":65,"column":20},"generated":{"line":1,"column":898}},{"source":"../../src/directives.ts","name":null,"original":{"line":65,"column":26},"generated":{"line":1,"column":904}},{"source":"../../src/directives.ts","name":null,"original":{"line":65,"column":61},"generated":{"line":1,"column":939}},{"source":"../../src/directives.ts","name":null,"original":{"line":65,"column":74},"generated":{"line":1,"column":941}},{"source":"../../src/directives.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":956}},{"source":"../../src/directives.ts","name":null,"original":{"line":72,"column":26},"generated":{"line":1,"column":962}},{"source":"../../src/directives.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":971}},{"source":"../../src/directives.ts","name":null,"original":{"line":73,"column":6},"generated":{"line":1,"column":975}},{"source":"../../src/directives.ts","name":null,"original":{"line":73,"column":21},"generated":{"line":1,"column":978}},{"source":"../../src/directives.ts","name":null,"original":{"line":76,"column":9},"generated":{"line":1,"column":982}},{"source":"../../src/directives.ts","name":null,"original":{"line":77,"column":6},"generated":{"line":1,"column":986}},{"source":"../../src/directives.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":1,"column":989}},{"source":"../../src/directives.ts","name":null,"original":{"line":79,"column":13},"generated":{"line":1,"column":992}},{"source":"../../src/directives.ts","name":null,"original":{"line":85,"column":9},"generated":{"line":1,"column":998}},{"source":"../../src/directives.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":1000}},{"source":"../../src/directives.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":1008}},{"source":"../../src/directives.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":1034}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1036}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1044}},{"source":"../../src/directives.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":1058}}],"sources":{"../../src/directives.ts":"// Provides the methods that allow QueryManager to handle\n// the `skip` and `include` directives within GraphQL.\nimport {\n  FieldNode,\n  SelectionNode,\n  VariableNode,\n  BooleanValueNode,\n  DirectiveNode,\n} from 'graphql';\n\nimport {\n  argumentsObjectFromField,\n} from './storeUtils';\n\nexport type DirectiveInfo = {\n  [fieldName: string]: {[argName: string]: any},\n};\n\nexport function getDirectiveInfoFromField(field: FieldNode, variables: Object): DirectiveInfo {\n  if (field.directives && field.directives.length) {\n    const directiveObj: DirectiveInfo = {};\n    field.directives.forEach((directive: DirectiveNode) => {\n      directiveObj[directive.name.value] = argumentsObjectFromField(directive, variables);\n    });\n    return directiveObj;\n  }\n  return null;\n}\n\nexport function shouldInclude(selection: SelectionNode, variables: { [name: string]: any } = {}): Boolean {\n  if (!selection.directives) {\n    return true;\n  }\n\n  let res: Boolean = true;\n  selection.directives.some((directive) => {\n    // TODO should move this validation to GraphQL validation once that's implemented.\n    if (directive.name.value !== 'skip' && directive.name.value !== 'include') {\n      // Just don't worry about directives we don't understand\n      return;\n    }\n\n    //evaluate the \"if\" argument and skip (i.e. return undefined) if it evaluates to true.\n    const directiveArguments = directive.arguments;\n    const directiveName = directive.name.value;\n    if (directiveArguments.length !== 1) {\n      throw new Error(`Incorrect number of arguments for the @${directiveName} directive.`);\n    }\n\n\n    const ifArgument = directive.arguments[0];\n    if (!ifArgument.name || ifArgument.name.value !== 'if') {\n      throw new Error(`Invalid argument for the @${directiveName} directive.`);\n    }\n\n    const ifValue = directive.arguments[0].value;\n    let evaledValue: Boolean = false;\n    if (!ifValue || ifValue.kind !== 'BooleanValue') {\n      // means it has to be a variable value if this is a valid @skip or @include directive\n      if (ifValue.kind !== 'Variable') {\n        throw new Error(`Argument for the @${directiveName} directive must be a variable or a bool ean value.`);\n      } else {\n        evaledValue = variables[(ifValue as VariableNode).name.value];\n        if (evaledValue === undefined) {\n          throw new Error(`Invalid variable referenced in @${directiveName} directive.`);\n        }\n      }\n    } else {\n      evaledValue = (ifValue as BooleanValueNode).value;\n    }\n\n    if (directiveName === 'skip') {\n      evaledValue = !evaledValue;\n    }\n\n    if (!evaledValue) {\n      res = false;\n      // Exit this function:\n      return true;\n    }\n\n    return false;\n  });\n\n  return res;\n}\n"},"lineCount":null}},"error":null,"hash":"af1b8292e7370ed28ce08a73213446d8","cacheData":{"env":{}}}